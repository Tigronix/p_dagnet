{"version":3,"sources":["main.js"],"names":["select","selects","document","querySelectorAll","forEach","btn","querySelector","text","options","close","classList","remove","open","add","addEventListener","e","isActive","contains","option","value","innerText","documentElement","event","isClickWithinOpenedDiv","top_walker","target","node","mainSlider","sliders","slider","dots","arrows","infinite","speed","prevArrow","nextArrow","$","slick","rangeSlider","totalPrices","summArray","summ","updateInfo","type","lexicon","numberNodes","keyNodes","activeItem","currentValue","numberNode","keyNode","keyText","declOfNum","makeCircles","isInet","isTv","isInetTv","buildCircles","circle","lexiconArray","circleNode","liItems","activePercent","liItem","index","array","totalNumber","length","currentIndex","getPercentNumberFromNumber","fillPercent","getPercent","DAG","changeCircle","calc","items","item","dataPrice","parseInt","getAttribute","push","reducer","accumulator","reduce","totalPrice","bar","optionCoords","getOptionCoords","offsetLeft","setAttribute","changeBtnPosition","closest","barLeft","barWidth","getBoundingClientRect","width","btnLeft","cursorX","a","b","Math","abs","itemLeft","style","left","changeInitialPosition","btnChangePositionMobile","touchClientX","touches","clientX","window","removeEventListener","tabs","btns","contentData","btnNumberData","contentNodes","btnSiblings","getSiblings","btnSibling","contentNode","Array","from","children","itemNumberData","isNumberEqual","siblings","sibling","pick","span","textContent","tripleSlider","slidesToShow","responsive","breakpoint","settings","variableWidth","doubleSlider","circleHover","circleHovers","fromMobile","matchMedia","matches","changeDescPosition","elem","isClassList","isElem","descData","descNode","positionX","positionY","cursorY","search","searchNodes","searchNode","defaultNode","activeNode","openBtns","closeBtns","openBtn","closeBtn","menu","btnsOpen","btnsClose","btnOpen","body","btnClose","triangle","container","updateTriangleSize","containerInfo","getComputedStyle","containerMarginRight","marginRight","containerPaddingRight","paddingRight","triangleWidth","searchMenu","contentSlider","asNavFor","adaptiveHeight","bottomSlider","centerMode","focusOnSelect","section","setTimeout","createZoom","zoomTemplate","zoomElement","content","cloneNode","ZoomLayout","ymaps","templateLayoutFactory","createClass","outerHTML","build","superclass","call","zoomInCallback","util","bind","zoomIn","zoomOutCallback","zoomOut","clear","unbind","map","getData","control","getMap","setZoom","getZoom","checkZoomRange","ZoomControl","layout","position","right","top","createHubs","hubs","img","hub","createHubBaloon","MyBalloonLayout","_","Placemark","iconCaption","iconLayout","iconImageHref","iconImageSize","iconImageOffset","preset","balloonLayout","balloonPanelMaxMapArea","hideIconOnBalloonOpen","template","pinHubTemplate","pinHubElement","key","el","toLowerCase","createBaloon","createPinBaloon","templateElement","element","popup","contentLayout","layoutRootSelector","onBuild","constructor","_element","getParentElement","applyElementOffset","onCloseClick","click","onSublayoutSizeChange","apply","arguments","_isElement","events","fire","offsetWidth","offsetHeight","preventDefault","getMinimalDistanceToHub","url","latitude","longitude","fetch","method","mode","cache","URLSearchParams","LATITUDE","LONGITUDE","MODE","then","response","status","json","closest_nodes","catch","error","console","log","init","mapElement","center","dataset","trim","JSON","parse","bounds","hubImg","hubimg","renderHubs","renderhubs","pinImg","pinimg","undefined","pinSize","pinsize","statusUrl","statusurl","zoom","button","addressElement","suggestView","SuggestView","evt","geocode","obj","geoObjects","get","hint","properties","mapState","getCenterAndZoom","clientWidth","clientHeight","shortAddress","getAdministrativeAreas","getThoroughfare","getPremiseNumber","getPremise","join","data","mapObject","removeAll","point","setCenter","placemark","geometry","setCoordinates","set","balloonStatus","balloonHeader","balloonContent","visible","balloonShadow","balloon","myCircle","Circle","fillOpacity","outline","Map","controls","getCenter","behaviors","disable","test","navigator","userAgent","ready","accordion","parentItem","itemSiblings","itemSibling","btnCoords","getCoords","scrollTop","scroll","behavior","closeCookies","closeButton","cookies","ACTIVE","showBlock","block","closeBlock","phoneMask","mask","validateForm","form","parsley","submit","connectSelect","isSelect","dataIndex","isMatch","ESC_CODE","siteContent","footer","isIe11","MSInputMethodContext","documentMode","interval","angleIncrement","angle","isPercentZero","isPercentFull","initPopup","initOpenBtn","initCloseBtn","dataSelector","initClosePopup","popups","number","words","parentNode","firstChild","nodeType","nextSibling","test_func","last_parent","box","pageYOffset","pageXOffset","num","per","getMousePosition","x","y","onPageRdy"],"mappings":"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","file":"main.js","sourcesContent":["\r  const select = () => {\r\n\r    const selects = document.querySelectorAll('.js-select');\r\n\r  \r\n\r    selects.forEach((select) => {\r\n\r      const btn = select.querySelector('.js-select-btn');\r\n\r      const text = select.querySelector('.js-select-text');\r\n\r      const options = select.querySelectorAll('.js-select-option');\r\n\r  \r\n\r      const close = () => {\r\n\r        select.classList.remove('active');\r\n\r      };\r\n\r  \r\n\r      const open = () => {\r\n\r        select.classList.add('active');\r\n\r      };\r\n\r  \r\n\r      btn.addEventListener('click', (e) => {\r\n\r        const isActive = select.classList.contains('active');\r\n\r  \r\n\r        if(isActive){\r\n\r          close();\r\n\r        }else {\r\n\r          open();\r\n\r        }\r\n\r      });\r\n\r  \r\n\r      options.forEach((option) => {\r\n\r        option.addEventListener('click', () => {\r\n\r          const value = option.innerText;\r\n\r          text.innerText = value;\r\n\r  \r\n\r          close();\r\n\r        });\r\n\r      });\r\n\r  \r\n\r  \r\n\r      document.documentElement.addEventListener('click', function (event) {\r\n\r      \tvar isClickWithinOpenedDiv = top_walker(event.target, function (node) {\r\n\r      \t\treturn node === select\r\n\r      \t});\r\n\r      \tif (isClickWithinOpenedDiv) {\r\n\r  \r\n\r      \t}else{\r\n\r          close();\r\n\r        }\r\n\r      }, true);\r\n\r    });\r\n\r  \r\n\r  \r\n\r  };\r\n\r  \r\n  const mainSlider = () => {\r\n    const sliders = document.querySelectorAll('.js-main-slider');\r\n  \r\n    sliders.forEach((slider) => {\r\n      const options = {\r\n        dots: true,\r\n        arrows: true,\r\n        infinite: true,\r\n        speed: 400,\r\n        prevArrow: '<button type=\"button\" class=\"map-arrow map-arrow--left\" tabindex=\"0\"><svg class=\"icon icon-circle-arrow-left arrow__icon\"><use xlink:href=\"#circle-arrow-left\"></use></svg></button>',\r\n        nextArrow: '<button type=\"button\" class=\"map-arrow map-arrow--right\" tabindex=\"0\"><svg class=\"icon icon-circle-arrow-right arrow__icon\"><use xlink:href=\"#circle-arrow-right\"></use></svg></button>',\r\n      };\r\n  \r\n      $(slider).slick(options);\r\n    });\r\n  };\r\n  \r\n  const rangeSlider = () => {\r\n    const sliders = document.querySelectorAll('.js-range-slider');\r\n    const totalPrices = document.querySelectorAll('.js-build-price');\r\n    let summArray = [];\r\n    let summ = 0;\r\n  \r\n    const updateInfo = (slider, type, lexicon) => {\r\n      const numberNodes = document.querySelectorAll(`.js-${type}-number`);\r\n      const keyNodes = document.querySelectorAll(`.js-${type}-key`);\r\n      const activeItem = slider.querySelector('.js-li.active');\r\n      const currentValue = activeItem.querySelector('.js-item').innerText;\r\n  \r\n      numberNodes.forEach((numberNode) => {\r\n        numberNode.innerText = currentValue;\r\n      });\r\n  \r\n      keyNodes.forEach((keyNode) => {\r\n        const keyText = declOfNum(currentValue, lexicon);\r\n        keyNode.innerText = keyText;\r\n      });\r\n    };\r\n  \r\n    const makeCircles = (slider) => {\r\n      const isInet = slider.classList.contains('js-range-slider-inet');\r\n      const isTv = slider.classList.contains('js-range-slider-tv');\r\n      const isInetTv = slider.classList.contains('js-range-slider-tv-inet');\r\n  \r\n      const buildCircles = (circle, slider, type, lexiconArray) => {\r\n        const circleNode = document.querySelector(`.${circle}`);\r\n        const liItems = slider.querySelectorAll('.js-li');\r\n        let activePercent = 0;\r\n  \r\n        // get active percent\r\n        liItems.forEach((liItem, index, array) => {\r\n          const isActive = liItem.classList.contains('active');\r\n  \r\n          if(isActive){\r\n            const totalNumber = array.length - 1;\r\n            const currentIndex = index;\r\n  \r\n            activePercent = getPercentNumberFromNumber(totalNumber, currentIndex);\r\n          }\r\n        });\r\n  \r\n        const fillPercent = getPercent(360, activePercent);\r\n        DAG.changeCircle(circleNode, fillPercent);\r\n        updateInfo(slider, type, lexiconArray);\r\n      };\r\n  \r\n      if(isInet){\r\n        buildCircles('js-circle-inet', slider, 'inet', ['Мбит/с', 'Мбит/с', 'Мбит/с']);\r\n      }else if(isTv){\r\n        buildCircles('js-circle-tv', slider, 'tv', ['Канал', 'Канала', 'Каналов']);\r\n      }else if(isInetTv){\r\n        buildCircles('js-circle-inet-tv', slider, 'inet-tv', ['Канал', 'Канала', 'Каналов']);\r\n      }\r\n    };\r\n  \r\n    const calc = () => {\r\n      const items = document.querySelectorAll('.js-li');\r\n      summArray = [];\r\n  \r\n      items.forEach((item) => {\r\n        const isActive = item.classList.contains('active');\r\n  \r\n        if(isActive){\r\n          const dataPrice = parseInt(item.getAttribute('data-price'));\r\n  \r\n          summArray.push(dataPrice);\r\n          const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n          summ = summArray.reduce(reducer);\r\n        }\r\n      });\r\n  \r\n      totalPrices.forEach((totalPrice) => {\r\n        totalPrice.innerText = summ;\r\n      });\r\n    };\r\n  \r\n    calc();\r\n  \r\n    sliders.forEach((slider, index) => {\r\n      const btn = slider.querySelector('.js-btn');\r\n      const bar = slider.querySelector('.js-bar');\r\n      const items = slider.querySelectorAll('.js-li');\r\n      let optionCoords = [];\r\n  \r\n  \r\n      const getOptionCoords = () => {\r\n        optionCoords = [];\r\n  \r\n        items.forEach((item) => {\r\n          const offsetLeft = item.offsetLeft;\r\n  \r\n          item.setAttribute('data-left', offsetLeft);\r\n          optionCoords.push(offsetLeft);\r\n        });\r\n      };\r\n  \r\n      const changeBtnPosition = () => {\r\n        const slider = btn.closest('.js-range-slider');\r\n        const barLeft = bar.offsetLeft;\r\n        const barWidth = bar.getBoundingClientRect().width;\r\n        let btnLeft = DAG.cursorX - barLeft;\r\n  \r\n        if(btnLeft > barWidth) {\r\n          btnLeft = barWidth;\r\n        }else if (btnLeft < 0) {\r\n          btnLeft = 0;\r\n        }\r\n  \r\n        const closest = optionCoords.reduce((a, b) => {\r\n          return Math.abs(b - btnLeft) < Math.abs(a - btnLeft) ? b : a;\r\n        });\r\n  \r\n        // add or remove \"active\"\r\n        items.forEach((item) => {\r\n          const itemLeft = item.getAttribute('data-left');\r\n          const isActive = itemLeft == closest;\r\n  \r\n          if(isActive){\r\n            item.classList.add('active');\r\n          }else{\r\n            item.classList.remove('active');\r\n          }\r\n        });\r\n  \r\n        btn.style.left = `${closest}px`;\r\n        calc();\r\n        makeCircles(slider);\r\n      };\r\n  \r\n      const changeInitialPosition = () => {\r\n        items.forEach((item) => {\r\n          const isActive = item.classList.contains('active');\r\n  \r\n          if(isActive){\r\n            const offsetLeft = item.offsetLeft;\r\n            btn.style.left = `${offsetLeft}px`;\r\n          }\r\n        });\r\n      };\r\n  \r\n      const btnChangePositionMobile = (e) => {\r\n        const slider = btn.closest('.js-range-slider');\r\n        const isInet = slider.classList.contains('js-range-slider-inet');\r\n        const isTv = slider.classList.contains('js-range-slider-tv');\r\n        const isInetTv = slider.classList.contains('js-range-slider-tv-inet');\r\n        const touchClientX = e.touches[0].clientX;\r\n        const barLeft = bar.offsetLeft;\r\n        const barWidth = bar.getBoundingClientRect().width;\r\n        let btnLeft = touchClientX - barLeft;\r\n  \r\n        if(btnLeft > barWidth) {\r\n          btnLeft = barWidth;\r\n        }else if (btnLeft < 0) {\r\n          btnLeft = 0;\r\n        }\r\n  \r\n        const closest = optionCoords.reduce((a, b) => {\r\n          return Math.abs(b - btnLeft) < Math.abs(a - btnLeft) ? b : a;\r\n        });\r\n  \r\n        // add or remove \"active\"\r\n        items.forEach((item) => {\r\n          const itemLeft = item.getAttribute('data-left');\r\n          const isActive = itemLeft == closest;\r\n  \r\n          if(isActive){\r\n            item.classList.add('active');\r\n          }else{\r\n            item.classList.remove('active');\r\n          }\r\n        });\r\n  \r\n        btn.style.left = `${closest}px`;\r\n        calc();\r\n  \r\n        if(isInet){\r\n          updateInfo(slider, 'inet', ['Мбит/с', 'Мбит/с', 'Мбит/с']);\r\n        }else if(isTv){\r\n          updateInfo(slider, 'tv', ['Канал', 'Канала', 'Каналов']);\r\n        }else if(isInetTv){\r\n          updateInfo(slider, 'inet-tv', ['Канал', 'Канала', 'Каналов']);\r\n        }\r\n      };\r\n  \r\n      // init\r\n      getOptionCoords();\r\n      changeInitialPosition();\r\n      makeCircles(slider);\r\n  \r\n      // events\r\n      items.forEach((item) => {\r\n        item.addEventListener('click', () => {\r\n          changeBtnPosition();\r\n        });\r\n      });\r\n  \r\n      btn.addEventListener('mousedown', () => {\r\n        window.addEventListener('mousemove', changeBtnPosition);\r\n        btn.classList.add('active');\r\n      });\r\n  \r\n      window.addEventListener('mouseup', () => {\r\n        window.removeEventListener('mousemove', changeBtnPosition);\r\n        btn.classList.remove('active');\r\n      });\r\n  \r\n      btn.addEventListener('touchstart', () => {\r\n        window.addEventListener('touchmove', btnChangePositionMobile, true);\r\n        btn.classList.add('active');\r\n      });\r\n  \r\n      btn.addEventListener('touchend', () => {\r\n        window.removeEventListener('touchmove', btnChangePositionMobile, true);\r\n        btn.classList.remove('active');\r\n      });\r\n    });\r\n  };\r\n  \r\n  const tabs = () => {\r\n  \tconst btns = document.querySelectorAll('[data-tabclass]');\r\n  \r\n    btns.forEach((btn) => {\r\n      btn.addEventListener('click', () => {\r\n        const contentData = btn.getAttribute('data-tabclass');\r\n        const btnNumberData = btn.getAttribute('data-tabnumber');\r\n        const contentNodes = document.querySelectorAll(`.${contentData}`);\r\n        const btnSiblings = getSiblings(btn);\r\n  \r\n        // toggle btn class\r\n        btnSiblings.forEach((btnSibling) => {\r\n          btnSibling.classList.remove('active');\r\n        });\r\n  \r\n        btn.classList.add('active');\r\n  \r\n        // toggle contentNodes\r\n        contentNodes.forEach((contentNode) => {\r\n          const items = Array.from(contentNode.children);\r\n  \r\n          items.forEach((item) => {\r\n            const itemNumberData = item.getAttribute('data-tabnumber');\r\n            const isNumberEqual = itemNumberData == btnNumberData;\r\n  \r\n            if(isNumberEqual) {\r\n              const siblings = getSiblings(item);\r\n  \r\n              siblings.forEach((sibling) => {\r\n                sibling.classList.remove('active');\r\n              });\r\n  \r\n              item.classList.add('active');\r\n            }\r\n          });\r\n        });\r\n      });\r\n    });\r\n  };\r\n  \r\n  function pick () {\r\n    const items = document.querySelectorAll('.js-pick');\r\n  \r\n    items.forEach(item => {\r\n      const btn = item.querySelector('.js-pick-btn'),\r\n            span = btn.querySelector('span');\r\n  \r\n      btn.addEventListener('click', event => {\r\n        if (item.classList.contains('pick')) {\r\n          item.classList.remove('pick');\r\n          span.textContent = 'Выбрать';\r\n        }\r\n        else {\r\n          item.classList.add('pick');\r\n          span.textContent = 'Выбрано';\r\n        }\r\n      })\r\n    })\r\n  }\r\n  const tripleSlider = () => {\r\n    const sliders = document.querySelectorAll('.js-triple-slider');\r\n  \r\n    sliders.forEach((slider) => {\r\n      const options = {\r\n        dots: true,\r\n        arrows: false,\r\n        infinite: true,\r\n        speed: 400,\r\n        slidesToShow: 3,\r\n        responsive: [\r\n          {\r\n            breakpoint: 981,\r\n            settings: {\r\n              variableWidth: true,\r\n              slidesToShow: 1,\r\n            }\r\n          }\r\n        ]\r\n      };\r\n  \r\n      $(slider).slick(options);\r\n    });\r\n  };\r\n  \r\n  const doubleSlider = () => {\r\n    const sliders = document.querySelectorAll('.js-double-slider');\r\n  \r\n    sliders.forEach((slider) => {\r\n      const options = {\r\n        dots: true,\r\n        arrows: false,\r\n        infinite: true,\r\n        speed: 400,\r\n        slidesToShow: 2,\r\n        responsive: [\r\n          {\r\n            breakpoint: 981,\r\n            settings: {\r\n              slidesToShow: 1\r\n            }\r\n          }\r\n        ]\r\n      };\r\n  \r\n      $(slider).slick(options);\r\n    });\r\n  };\r\n  \r\n  const circleHover = () => {\r\n    const circleHovers = document.querySelectorAll('.build__circle-hover');\r\n    const fromMobile = window.matchMedia('(min-width: 981px)').matches;\r\n  \r\n      circleHovers.forEach((circleHover) => {\r\n        const changeDescPosition = (e, elem) => {\r\n          const isClassList = e.target.classList;\r\n          \r\n          if(isClassList){\r\n            const isElem = e.target.classList.contains(`js-icon-${elem}`);\r\n  \r\n            if(isElem){\r\n              const elem = e.target;\r\n              const descData = elem.getAttribute('data-desc');\r\n              const descNode = document.querySelector(`.${descData}`);\r\n              const positionX = DAG.cursorX + 10;\r\n              const positionY = DAG.cursorY + 20;\r\n  \r\n              // set desc position\r\n              descNode.setAttribute('style', `left: ${positionX}px; top: ${positionY}px;`);\r\n              descNode.classList.add('active');\r\n  \r\n              elem.addEventListener('mouseleave', () => {\r\n                descNode.classList.remove('active');\r\n              });\r\n            }\r\n          }\r\n        };\r\n  \r\n        if(fromMobile){\r\n          window.addEventListener('mousemove', function (e) {\r\n            changeDescPosition(e, 'inet');\r\n            changeDescPosition(e, 'tv');\r\n            changeDescPosition(e, 'inet-tv');\r\n          });\r\n        }\r\n    });\r\n  };\r\n  \r\n  const search = () => {\r\n    const searchNodes = document.querySelectorAll('.js-search');\r\n  \r\n    searchNodes.forEach((searchNode) => {\r\n      const defaultNode = searchNode.querySelector('.js-default');\r\n      const activeNode = searchNode.querySelector('.js-active');\r\n      const openBtns = searchNode.querySelectorAll('.js-btn');\r\n      const closeBtns = searchNode.querySelectorAll('.js-close-btn');\r\n  \r\n      const open = () => {\r\n        searchNode.classList.add('active');\r\n      };\r\n  \r\n      const close = () => {\r\n        searchNode.classList.remove('active');\r\n      };\r\n  \r\n      openBtns.forEach((openBtn) => {\r\n        openBtn.addEventListener('click', () => {\r\n          open();\r\n        });\r\n      });\r\n  \r\n      closeBtns.forEach((closeBtn) => {\r\n        closeBtn.addEventListener('click', () => {\r\n          close();\r\n        });\r\n      });\r\n    });\r\n  };\r\n  \r\n  const menu = () => {\r\n    const btnsOpen = document.querySelectorAll('.js-menu-open');\r\n    const btnsClose = document.querySelectorAll('.js-menu-close');\r\n  \r\n    btnsOpen.forEach((btnOpen) => {\r\n      btnOpen.addEventListener('click', () => {\r\n        const menu = document.querySelector('.js-menu');\r\n        const isActive = menu.classList.contains('active');\r\n  \r\n        menu.classList.add('active');\r\n        DAG.body.classList.add('overflow');\r\n      });\r\n    });\r\n  \r\n    btnsClose.forEach((btnClose) => {\r\n      btnClose.addEventListener('click', () => {\r\n        const menu = document.querySelector('.js-menu');\r\n        const isActive = menu.classList.contains('active');\r\n  \r\n        menu.classList.remove('active');\r\n        DAG.body.classList.remove('overflow');\r\n      });\r\n    });\r\n  };\r\n  \r\n  const triangle = () => {\r\n    const container = document.querySelector('.js-about-container');\r\n    const triangle = document.querySelector('.js-about-triangle');\r\n  \r\n    const updateTriangleSize = (container, triangle) => {\r\n      const containerInfo = getComputedStyle(container);\r\n      const containerMarginRight = parseInt(containerInfo.marginRight);\r\n      const containerPaddingRight = parseInt(containerInfo.paddingRight);\r\n      const triangleWidth = (containerMarginRight + containerPaddingRight) / 10;\r\n  \r\n      triangle.setAttribute('style', `font-size: ${triangleWidth}rem;`);\r\n    };\r\n  \r\n    updateTriangleSize(container, triangle);\r\n  \r\n    window.addEventListener('resize', () => {\r\n      updateTriangleSize(container, triangle);\r\n    });\r\n  };\r\n  \r\n  const searchMenu = () => {\r\n    const btnsOpen = document.querySelectorAll('.js-search-mobile-btn');\r\n    const btnsClose = document.querySelectorAll('.js-search-close');\r\n  \r\n    btnsOpen.forEach((btnOpen) => {\r\n      btnOpen.addEventListener('click', () => {\r\n        const menu = document.querySelector('.js-search-popup');\r\n        const isActive = menu.classList.contains('active');\r\n  \r\n        menu.classList.add('active');\r\n        DAG.body.classList.add('overflow');\r\n      });\r\n    });\r\n  \r\n    btnsClose.forEach((btnClose) => {\r\n      btnClose.addEventListener('click', () => {\r\n        const menu = document.querySelector('.js-search-popup');\r\n        const isActive = menu.classList.contains('active');\r\n  \r\n        menu.classList.remove('active');\r\n        DAG.body.classList.remove('overflow');\r\n      });\r\n    });\r\n  };\r\n  \r\n  const contentSlider = () => {\r\n    const sliders = document.querySelectorAll('.js-slider-content');\r\n  \r\n    sliders.forEach((slider) => {\r\n      const options = {\r\n        dots: false,\r\n        arrows: false,\r\n        infinite: false,\r\n        speed: 400,\r\n        slidesToShow: 1,\r\n        asNavFor: '.js-slider-bottom',\r\n        adaptiveHeight: true\r\n      };\r\n  \r\n      $(slider).slick(options);\r\n    });\r\n  };\r\n  \r\n  const bottomSlider = () => {\r\n    const sliders = document.querySelectorAll('.js-slider-bottom');\r\n  \r\n    sliders.forEach((slider) => {\r\n      const options = {\r\n        dots: false,\r\n        arrows: false,\r\n        infinite: false,\r\n        speed: 400,\r\n        variableWidth: true,\r\n        centerMode: true,\r\n        asNavFor: '.js-slider-content',\r\n        focusOnSelect: true\r\n      };\r\n      const section = slider.closest('.js-history');\r\n  \r\n      $(slider).slick(options);\r\n  \r\n      $(slider).slick('slickGoTo', 4);\r\n      \r\n      setTimeout(() => {\r\n        section.classList.add('init');\r\n      }, 400);\r\n    });\r\n  };\r\n  \r\n  (function () {\r\n    function createZoom() {\r\n      const zoomTemplate = document.querySelector('#zoom-map-template');\r\n      const zoomElement = zoomTemplate.content.children[0].cloneNode(true);\r\n  \r\n      const ZoomLayout = ymaps.templateLayoutFactory.createClass(\r\n        zoomElement.outerHTML,\r\n        {\r\n          /**\r\n           * Redefining methods of the layout, in order to perform\r\n           * additional steps when building and clearing the layout.\r\n           */\r\n          build: function () {\r\n            // Calling the \"build\" parent method.\r\n            ZoomLayout.superclass.build.call(this);\r\n  \r\n            /**\r\n             * Binding handler functions to the context and storing references\r\n             * to them in order to unsubscribe from the event later.\r\n             */\r\n            this.zoomInCallback = ymaps.util.bind(this.zoomIn, this);\r\n            this.zoomOutCallback = ymaps.util.bind(this.zoomOut, this);\r\n  \r\n            // Beginning to listen for clicks on the layout buttons.\r\n            $('#zoom-in').bind('click', this.zoomInCallback);\r\n            $('#zoom-out').bind('click', this.zoomOutCallback);\r\n          },\r\n  \r\n          clear: function () {\r\n            // Removing click handlers.\r\n            $('#zoom-in').unbind('click', this.zoomInCallback);\r\n            $('#zoom-out').unbind('click', this.zoomOutCallback);\r\n  \r\n            // Calling the \"clear\" parent method.\r\n            ZoomLayout.superclass.clear.call(this);\r\n          },\r\n  \r\n          zoomIn: function () {\r\n            var map = this.getData().control.getMap();\r\n            map.setZoom(map.getZoom() + 1, { checkZoomRange: true });\r\n          },\r\n  \r\n          zoomOut: function () {\r\n            var map = this.getData().control.getMap();\r\n            map.setZoom(map.getZoom() - 1, { checkZoomRange: true });\r\n          }\r\n        });\r\n  \r\n      return new ymaps.control.ZoomControl({\r\n        options: {\r\n          layout: ZoomLayout,\r\n          position: {\r\n            right: 40,\r\n            top: 150,\r\n          }\r\n        }\r\n      });\r\n    }\r\n  \r\n    function createHubs(hubs, img) {\r\n      return hubs.map((hub) => {\r\n        const [MyBalloonLayout, _] = createHubBaloon(hub, '#pin-hub-template');\r\n  \r\n        return new ymaps.Placemark(\r\n          hub['COORDINATES'],\r\n          {\r\n            iconCaption: img,\r\n          },\r\n          {\r\n            iconLayout: 'default#image',\r\n            iconImageHref: img,\r\n            iconImageSize: [30, 30],\r\n            iconImageOffset: [-15, -15],\r\n            preset: 'islands#redDotIconWithCaption',\r\n            balloonLayout: MyBalloonLayout,\r\n            balloonPanelMaxMapArea: 0,\r\n            hideIconOnBalloonOpen: false,\r\n          }\r\n        );\r\n      })\r\n    }\r\n  \r\n    function createHubBaloon(hub, template) {\r\n      const pinHubTemplate = document.querySelector(template);\r\n      const pinHubElement = pinHubTemplate.content.children[0].cloneNode(true);\r\n      pinHubElement.closest('.contacts-map__block').classList.add(hub['STATUS'] === 'ONLINE' ? 'contacts-map__block--status-online' : 'contacts-map__block--status-offline');\r\n      for (let key in hub) {\r\n        const el = pinHubElement.querySelector('#' + key.toLowerCase());\r\n        if (el) {\r\n          el.textContent = hub[key];\r\n        }\r\n      }\r\n      return createBaloon(pinHubElement.outerHTML, null, '.contacts-map__block');\r\n    }\r\n  \r\n    function createPinBaloon(template) {\r\n      const templateElement = document.querySelector(template);\r\n      const element = templateElement.content.children[0].cloneNode(true);\r\n      return createBaloon(element.outerHTML, null, '.contacts-map__block', DAG.popup);\r\n    }\r\n  \r\n    function createBaloon(layout, contentLayout, layoutRootSelector, onBuild) {\r\n      var MyBalloonLayout = ymaps.templateLayoutFactory.createClass(\r\n        layout,\r\n        // Пример\r\n        // '<div class=\"popover top' + (isCovered ? ' popover--success' : ' popover--error') + '\">' +\r\n        // '<a class=\"close\" href=\"#\">&times;</a>' +\r\n        // '<div class=\"arrow\"></div>' +\r\n        // '<div class=\"popover-inner\">' +\r\n        // '$[[options.contentLayout observeSize minWidth=235 maxWidth=235 maxHeight=350]]' +\r\n        // '</div>' +\r\n        // '</div>',\r\n        {\r\n          /**\r\n           * Строит экземпляр макета на основе шаблона и добавляет его в родительский HTML-элемент.\r\n           * @see https://api.yandex.ru/maps/doc/jsapi/2.1/ref/reference/layout.templateBased.Base.xml#build\r\n           * @function\r\n           * @name build\r\n           */\r\n          build: function () {\r\n            this.constructor.superclass.build.call(this);\r\n            this._element = this.getParentElement().querySelector(layoutRootSelector);\r\n            this.applyElementOffset();\r\n            this.onCloseClick = this.onCloseClick.bind(this);\r\n            this._element.querySelector('.js-baloon-close').addEventListener('click', this.onCloseClick);\r\n            if (onBuild) {\r\n              onBuild();\r\n            }\r\n          },\r\n  \r\n          /**\r\n           * Удаляет содержимое макета из DOM.\r\n           * @see https://api.yandex.ru/maps/doc/jsapi/2.1/ref/reference/layout.templateBased.Base.xml#clear\r\n           * @function\r\n           * @name clear\r\n           */\r\n          clear: function () {\r\n            this._element.querySelector('.js-baloon-close').click();\r\n  \r\n            this.constructor.superclass.clear.call(this);\r\n          },\r\n  \r\n          /**\r\n           * Метод будет вызван системой шаблонов АПИ при изменении размеров вложенного макета.\r\n           * @see https://api.yandex.ru/maps/doc/jsapi/2.1/ref/reference/IBalloonLayout.xml#event-userclose\r\n           * @function\r\n           * @name onSublayoutSizeChange\r\n           */\r\n          onSublayoutSizeChange: function () {\r\n            MyBalloonLayout.superclass.onSublayoutSizeChange.apply(this, arguments);\r\n  \r\n            if (!this._isElement(this._element)) {\r\n              return;\r\n            }\r\n  \r\n            this.applyElementOffset();\r\n            this.events.fire('shapechange');\r\n          },\r\n  \r\n          /**\r\n           * Сдвигаем балун, чтобы \".arrow\" указывал на точку привязки.\r\n           * @see https://api.yandex.ru/maps/doc/jsapi/2.1/ref/reference/IBalloonLayout.xml#event-userclose\r\n           * @function\r\n           * @name applyElementOffset\r\n           */\r\n          applyElementOffset: function () {\r\n            this._element.style.left = -(this._element.offsetWidth / 2) + 'px';\r\n            // -12 - магическое число. подобранно вручную. размер галочки .arrow 15px. по этому 12 выглядит симпатично.\r\n            this._element.style.top = -(this._element.offsetHeight + this._element.querySelector('.contacts-map__block-arrow').offsetHeight + 10) + 'px';\r\n          },\r\n  \r\n          /**\r\n           * Закрывает балун при клике на крестик, кидая событие \"userclose\" на макете.\r\n           * @see https://api.yandex.ru/maps/doc/jsapi/2.1/ref/reference/IBalloonLayout.xml#event-userclose\r\n           * @function\r\n           * @name onCloseClick\r\n           */\r\n          onCloseClick: function (e) {\r\n            e.preventDefault();\r\n            this.events.fire('userclose');\r\n          },\r\n  \r\n          /**\r\n           * Используется для автопозиционирования карты относительно облака сообщения (balloonAutoPan).\r\n           * @see https://api.yandex.ru/maps/doc/jsapi/2.1/ref/reference/ILayout.xml#getClientBounds\r\n           * @function\r\n           * @name getClientBounds\r\n           * @returns {Number[][]} Координаты левого верхнего и правого нижнего углов шаблона относительно точки привязки.\r\n           */\r\n          // getShape: function () {\r\n          //   if (!this._isElement(this._element)) {\r\n          //     return MyBalloonLayout.superclass.getShape.call(this);\r\n          //   }\r\n          //\r\n          //   var position = this._element.getBoundingClientRect();\r\n          //\r\n          //   return new ymaps.shape.Rectangle(new ymaps.geometry.pixel.Rectangle([\r\n          //     [position.left, position.top],\r\n          //     [\r\n          //       position.left + this._element.offsetWidth,\r\n          //       position.top + this._element.offsetHeight + this._element.querySelector('.contacts-map__block-arrow').offsetHeight\r\n          //     ]\r\n          //   ]));\r\n          // },\r\n  \r\n          /**\r\n           * Проверяем наличие элемента (в ИЕ и Опере его еще может не быть).\r\n           * @function\r\n           * @private\r\n           * @name _isElement\r\n           * @param [element] Элемент.\r\n           * @returns {Boolean} Флаг наличия.\r\n           */\r\n          _isElement: function (element) {\r\n            return !!(element && element.querySelector('.contacts-map__block-arrow'));\r\n          }\r\n        }\r\n      );\r\n  \r\n      // Пример\r\n      // Создание вложенного макета содержимого балуна.\r\n      // if (contentLayout) {\r\n      // var MyBalloonContentLayout = ymaps.templateLayoutFactory.createClass(\r\n      //   '<h3 class=\"popover-title\">$[properties.balloonHeader]</h3>' +\r\n      //   '<div class=\"popover-content\">$[properties.balloonContent]</div>'\r\n      // );\r\n      // }\r\n      // return [MyBalloonLayout, MyBalloonContentLayout];\r\n  \r\n      return [MyBalloonLayout, null];\r\n    }\r\n  \r\n    /**\r\n     * данные возвращаются в метрах\r\n     */\r\n    function getMinimalDistanceToHub(url, latitude, longitude) {\r\n      return fetch(\r\n        url,\r\n        {\r\n          method: 'POST',\r\n          mode: 'no-cors',\r\n          cache: 'no-cache',\r\n          body: new URLSearchParams({\r\n            LATITUDE: latitude,\r\n            LONGITUDE: longitude,\r\n            MODE: 'closest',\r\n          }),\r\n        }\r\n      )\r\n        .then((response) => {\r\n          return response.status === 200 ? response.json() : { status: false, closest_nodes: [] };\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          return { status: false, closest_nodes: [] };\r\n        });\r\n    }\r\n  \r\n  \r\n    function init(mapElement) {\r\n      const center = mapElement.dataset.center.trim() ? JSON.parse(mapElement.dataset.center) : null;\r\n      const bounds = mapElement.dataset.bounds.trim() ? JSON.parse(mapElement.dataset.bounds) : null;\r\n      const hubImg = mapElement.dataset.hubimg.trim();\r\n      const renderHubs = mapElement.dataset.renderhubs.trim().toLowerCase() === 'true';\r\n      const pinImg = mapElement.dataset.pinimg.trim() || undefined;\r\n      const pinSize = mapElement.dataset.pinsize.trim() ? JSON.parse(mapElement.dataset.pinsize) : [];\r\n      const statusUrl = mapElement.dataset.statusurl.trim() || '';\r\n      const zoom = parseInt(mapElement.dataset.zoom, 10) || 14;\r\n  \r\n      const button = document.querySelector('.contacts-map__search-button');\r\n      const addressElement = document.querySelector('.contacts-map__search-input');\r\n      if (addressElement) {\r\n        const suggestView = new ymaps.SuggestView(addressElement);\r\n        if (addressElement.value) {\r\n          setTimeout(() => {\r\n            button.click();\r\n          }, 1000);\r\n        }\r\n      }\r\n  \r\n      if (button) {\r\n        button.addEventListener('click', (evt) => {\r\n          ymaps.geocode(addressElement.value).then(function (response) {\r\n            var obj = response.geoObjects.get(0), error, hint;\r\n            const bounds = obj.properties.get('boundedBy');\r\n            const mapState = ymaps.util.bounds.getCenterAndZoom(\r\n              bounds,\r\n              [mapElement.clientWidth, mapElement.clientHeight],\r\n            );\r\n            const shortAddress = [obj.getAdministrativeAreas(), obj.getThoroughfare(), obj.getPremiseNumber(), obj.getPremise()].join(' ');\r\n            getMinimalDistanceToHub(statusUrl, mapState.center[0], mapState.center[1])\r\n              .then((data) => {\r\n                if (renderHubs) {\r\n                  mapObject.geoObjects.removeAll();\r\n                  createHubs(data.closest_nodes || [], hubImg).forEach((point) => {\r\n                    mapObject.geoObjects.add(point);\r\n                  })\r\n                }\r\n  \r\n                mapObject.setCenter(mapState.center, mapState.zoom);\r\n                mapObject.geoObjects.remove(placemark);\r\n                placemark.geometry.setCoordinates(mapState.center);\r\n                placemark.properties.set({\r\n                  balloonStatus: data.status ? 'contacts-map__block--status-online' : 'contacts-map__block--status-offline',\r\n                  balloonHeader: data.status ? 'Подключение возможно' : 'Подключение невозможно',\r\n                  balloonContent: shortAddress,\r\n                  // Расчет расстояния с указанием метрический единиц\r\n                  // ymaps.formatter.distance(minimalDistanceToHub)\r\n                  // При создании кастомного balloon можно использовать любые имена параметров.\r\n                  // Следующие три определены в спецификации и поддерживаются официально\r\n                  // balloonContentHeader: \"Балун метки\",\r\n                  // balloonContentBody: \"Содержимое <em>балуна</em> метки\",\r\n                  // balloonContentFooter: \"Подвал\",\r\n                });\r\n                const [balloonLayout, _] = createPinBaloon('#pin-template');\r\n                placemark.options.set({\r\n                  visible: true,\r\n                  balloonShadow: false,\r\n                  balloonLayout: balloonLayout,\r\n                  // balloonContentLayout: MyBalloonContentLayout,\r\n                  balloonPanelMaxMapArea: 0,\r\n                  hideIconOnBalloonOpen: false,\r\n                });\r\n                mapObject.geoObjects.add(placemark);\r\n                placemark.balloon.open();\r\n  \r\n  \r\n  \r\n                // Создаем круг\r\n                const myCircle = new ymaps.Circle([\r\n                  // Координаты центра круга\r\n                  mapState.center,\r\n                  // Радиус круга в метрах\r\n                  200,\r\n                ]);\r\n  \r\n                myCircle.options.set({\r\n                  fillOpacity: 0.3,\r\n                  outline: false\r\n                });\r\n  \r\n                // Добавляем круг на карту\r\n                mapObject.geoObjects.add(myCircle);\r\n              });\r\n          })\r\n        });\r\n      }\r\n  \r\n      const mapObject = new ymaps.Map(\"map\", {\r\n        center: bounds || center,\r\n        zoom: zoom,\r\n        controls: [\r\n          // 'zoomControl',\r\n          createZoom(),\r\n        ]\r\n      });\r\n  \r\n      const placemark = new ymaps.Placemark(\r\n        mapObject.getCenter(),\r\n        {\r\n          iconCaption: pinImg,\r\n        },\r\n        {\r\n          visible: !!bounds,\r\n          iconLayout: 'default#image',\r\n          iconImageHref: pinImg,\r\n          iconImageSize: pinSize.length ? pinSize : undefined,\r\n          iconImageOffset: pinSize.length ? [-pinSize[0] / 2, -pinSize[1] / 2] : undefined,\r\n          preset: 'islands#redDotIconWithCaption',\r\n        },\r\n      );\r\n  \r\n      mapObject.options.set('scrollZoomSpeed', 0);\r\n      mapObject.behaviors.disable('scrollZoom');\r\n      if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n        mapObject.behaviors.disable('drag');\r\n      }\r\n      mapObject.geoObjects.add(placemark);\r\n    }\r\n  \r\n    const mapElement = document.querySelector('#map');\r\n    if (window.ymaps && mapElement) {\r\n      ymaps.ready(() => init(mapElement));\r\n    }\r\n  })();\r\n  \r\n  const accordion = () => {\r\n    const btns = document.querySelectorAll('.js-accordion-btn');\r\n  \r\n    btns.forEach((btn) => {\r\n      btn.addEventListener('click', (evt) => {\r\n        evt.preventDefault();\r\n        const parentItem = btn.closest('.js-accordion-item');\r\n        const itemSiblings = getSiblings(parentItem);\r\n        const isActive = parentItem.classList.contains('active');\r\n  \r\n        // show/hide accordion-content\r\n        itemSiblings.forEach((itemSibling) => {\r\n          itemSibling.classList.remove('active');\r\n        });\r\n  \r\n        if (isActive) {\r\n          parentItem.classList.remove('active');\r\n        } else {\r\n          parentItem.classList.add('active');\r\n        }\r\n  \r\n        // scroll to accordion-content\r\n        const btnCoords = getCoords(btn);\r\n        const scrollTop = btnCoords.top - 400;\r\n  \r\n        window.scroll({\r\n          top: scrollTop,\r\n          behavior: 'smooth'\r\n        });\r\n      });\r\n    });\r\n  };\r\n  \r\n  const closeCookies = () => {\r\n    const closeButton = document.querySelectorAll('.js-close-cookies');\r\n    const cookies = document.querySelector('.cookies');\r\n  \r\n    const ACTIVE = 'cookies__active';\r\n  \r\n    const showBlock = (block) => {\r\n      if (block && !block.classList.contains(ACTIVE)) {\r\n        block.classList.add(ACTIVE);\r\n      }\r\n    };\r\n  \r\n    const closeBlock = (block) => {\r\n      if (block && block.classList.contains(ACTIVE)) {\r\n        block.classList.remove(ACTIVE);\r\n      }\r\n    };\r\n  \r\n    showBlock();\r\n  \r\n    closeButton.forEach((button) => {\r\n      button.addEventListener('click', function () {\r\n        closeBlock(cookies);\r\n      });\r\n    });\r\n  };\r\n  \r\n  const phoneMask = () => {\r\n    $('.js-phone-mask').mask('+7 (000) 000-00-00');\r\n  };\r\n  \r\n  const validateForm = () => {\r\n    const form = $('form');\r\n  \r\n    form.parsley();\r\n    form.submit((evt) => {\r\n      //событие успешной валидации onSuccess\r\n      evt.preventDefault();\r\n    });\r\n  };\r\n  \r\n  const connectSelect = () => {\r\n    const isSelect = document.querySelectorAll('.js-connect-select').length != 0;\r\n  \r\n    if(isSelect){\r\n      const select = document.querySelector('.js-connect-select');\r\n      const options = select.querySelectorAll('.js-select-option');\r\n      const section = select.closest('.js-connect');\r\n  \r\n      options.forEach((option) => {\r\n        option.addEventListener('click', () => {\r\n          const dataIndex = option.getAttribute('data-index');\r\n  \r\n          const items = section.querySelectorAll('.js-bg-img');\r\n          items.forEach((item) => {\r\n            const isMatch = item.getAttribute('data-index') == dataIndex;\r\n            item.classList.remove('active');\r\n  \r\n            if(isMatch){\r\n              item.classList.add('active');\r\n            }\r\n          });\r\n        });\r\n      });\r\n    }\r\n  };\r\n  \r\n  const DAG = {};\r\n  DAG.body = document.querySelector('body');\r\n  DAG.ESC_CODE = 27;\r\n  DAG.siteContent = document.querySelector('.site-content');\r\n  DAG.footer = document.querySelector('.page-footer');\r\n  DAG.isIe11 = !!window.MSInputMethodContext && !!document.documentMode;\r\n  DAG.cursorX = '';\r\n  DAG.cursorY = '';\r\n  \r\n  if(DAG.isIe11){\r\n    DAG.body.classList.add('ie11');\r\n  }\r\n  \r\n  // **************GLOBAL-FUNCTIONS**************\r\n  // changeCirles\r\n  DAG.changeCircle = (circle, fillPercent) => {\r\n      const interval = 10;\r\n      const angleIncrement = 6;\r\n      let angle = 0;\r\n      const isPercentZero = fillPercent == 0;\r\n      const isPercentFull = fillPercent == 360;\r\n  \r\n      if(isPercentFull){\r\n        fillPercent = 365;\r\n      }\r\n  \r\n      if(isPercentZero){\r\n        fillPercent = 5;\r\n      }\r\n      circle.setAttribute(\"stroke-dasharray\", `${fillPercent}, 20000`);\r\n  };\r\n  \r\n  DAG.initPopup = (openBtn, closeBtn) => {\r\n    DAG.initOpenBtn(openBtn);\r\n    DAG.initCloseBtn(closeBtn);\r\n  };\r\n  \r\n  DAG.initOpenBtn = (openBtn) => {\r\n    openBtn.addEventListener('click', () => {\r\n      const dataSelector = openBtn.getAttribute('data-selector');\r\n      const popup = document.querySelector(`.${dataSelector}`);\r\n  \r\n      popup.classList.add('active');\r\n      DAG.body.classList.add('overflow');\r\n    });\r\n  };\r\n  \r\n  DAG.initCloseBtn = (closeBtn) => {\r\n    closeBtn.addEventListener('click', (evt) => {\r\n      evt.preventDefault();\r\n      const popup = closeBtn.closest('.js-popup');\r\n  \r\n      popup.classList.remove('active');\r\n      DAG.body.classList.remove('overflow');\r\n    });\r\n  };\r\n  \r\n  DAG.initClosePopup = () => {\r\n    document.documentElement.addEventListener('click', function (event) {\r\n      const isClickWithinOpenedDiv = event.target.closest('.js-popup-content');\r\n      if (!isClickWithinOpenedDiv) {\r\n        const popups = document.querySelectorAll('.js-popup');\r\n  \r\n        popups.forEach((popup) => {\r\n          popup.classList.remove('active');\r\n        });\r\n        DAG.body.classList.remove('overflow');\r\n      }\r\n    }, true);\r\n  };\r\n  \r\n  DAG.popup = () => {\r\n    const openBtns = document.querySelectorAll('.js-popup-open');\r\n    const closeBtns = document.querySelectorAll('.js-popup-close');\r\n  \r\n    openBtns.forEach(DAG.initOpenBtn);\r\n    closeBtns.forEach(DAG.initCloseBtn);\r\n    DAG.initClosePopup();\r\n  };\r\n  \r\n  // lexicon\r\n  function declOfNum(number, words) {\r\n    return words[(number % 100 > 4 && number % 100 < 20) ? 2 : [2, 0, 1, 1, 1, 2][(number % 10 < 5) ? number % 10 : 5]];\r\n  };\r\n  \r\n  // siblings\r\n  var getSiblings = function (elem) {\r\n    var siblings = [];\r\n    var sibling = elem.parentNode.firstChild;\r\n  \r\n    while (sibling) {\r\n      if (sibling.nodeType === 1 && sibling !== elem) {\r\n        siblings.push(sibling);\r\n      }\r\n      sibling = sibling.nextSibling\r\n    }\r\n  \r\n    return siblings;\r\n  \r\n  };\r\n  \r\n  // click outside elem\r\n  function top_walker (node, test_func, last_parent) {\r\n  \twhile ( node && node !== last_parent ) {\r\n  \t\tif ( test_func(node) ) {\r\n  \t\t\treturn node;\r\n  \t\t}\r\n  \t\tnode = node.parentNode;\r\n  \t}\r\n  }\r\n  \r\n  // get coords\r\n  function getCoords(elem) {\r\n    let box = elem.getBoundingClientRect();\r\n  \r\n    return {\r\n      top: box.top + pageYOffset,\r\n      left: box.left + pageXOffset\r\n    };\r\n  }\r\n  \r\n  // get percent from number\r\n  const getPercent = (num, per) => {\r\n    return (num/100)*per;\r\n  };\r\n  \r\n  const getPercentNumberFromNumber = (totalNumber, number) => {\r\n    return (number/totalNumber)*100;\r\n  };\r\n  \r\n  // get mouse position\r\n  const getMousePosition = () => {\r\n    window.addEventListener('mousemove', function (e) {\r\n      DAG.cursorX = e.x;\r\n      DAG.cursorY = e.y;\r\n    });\r\n  };\r\n  \r\n  const onPageRdy = () => {\r\n    // utility\r\n    getMousePosition();\r\n    select();\r\n    rangeSlider();\r\n    tabs();\r\n    pick();\r\n    accordion();\r\n    DAG.popup();\r\n    phoneMask();\r\n  \r\n    // specific\r\n    circleHover();\r\n    search();\r\n    menu();\r\n    searchMenu();\r\n    triangle();\r\n    closeCookies();\r\n    validateForm();\r\n    connectSelect();\r\n  \r\n    // sliders\r\n    mainSlider();\r\n    tripleSlider();\r\n    doubleSlider();\r\n    contentSlider();\r\n    bottomSlider();\r\n  };\r\n  \r\n  onPageRdy();\r\n  \r\n"]}